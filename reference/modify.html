<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add Features to Feature Layer — add_features • arcgislayers</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add Features to Feature Layer — add_features"><meta name="description" content="Delete features from a feature layer based on object ID, a where clause, or a
spatial filter."><meta property="og:description" content="Delete features from a feature layer based on object ID, a where clause, or a
spatial filter."><meta property="og:image" content="/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">arcgislayers</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/R-ArcGIS/arcgislayers/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Add Features to Feature Layer</h1>
      <small class="dont-index">Source: <a href="https://github.com/R-ArcGIS/arcgislayers/blob/main/R/arc-add-update-delete.R" class="external-link"><code>R/arc-add-update-delete.R</code></a></small>
      <div class="d-none name"><code>modify.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Delete features from a feature layer based on object ID, a where clause, or a
spatial filter.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_features</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">.data</span>,</span>
<span>  chunk_size <span class="op">=</span> <span class="fl">2000</span>,</span>
<span>  match_on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"alias"</span><span class="op">)</span>,</span>
<span>  rollback_on_failure <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  token <span class="op">=</span> <span class="fu">arc_token</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">update_features</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">.data</span>,</span>
<span>  match_on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"alias"</span><span class="op">)</span>,</span>
<span>  token <span class="op">=</span> <span class="fu">arc_token</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  rollback_on_failure <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">delete_features</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  object_ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  where <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter_geom <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  predicate <span class="op">=</span> <span class="st">"intersects"</span>,</span>
<span>  rollback_on_failure <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  token <span class="op">=</span> <span class="fu">arc_token</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>an object of class <code>FeatureLayer</code></p></dd>


<dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>an object of class <code>sf</code> or <code>data.frame</code></p></dd>


<dt id="arg-chunk-size">chunk_size<a class="anchor" aria-label="anchor" href="#arg-chunk-size"></a></dt>
<dd><p>the maximum number of features to add at a time</p></dd>


<dt id="arg-match-on">match_on<a class="anchor" aria-label="anchor" href="#arg-match-on"></a></dt>
<dd><p>whether to match on the alias or the field name. Default,
the alias. See Details for more.</p></dd>


<dt id="arg-rollback-on-failure">rollback_on_failure<a class="anchor" aria-label="anchor" href="#arg-rollback-on-failure"></a></dt>
<dd><p>default <code>TRUE</code>. Specifies whether the edits should be
applied only if all submitted edits succeed.</p></dd>


<dt id="arg-token">token<a class="anchor" aria-label="anchor" href="#arg-token"></a></dt>
<dd><p>default <code>arc_token()</code>. An <code>httr2_token</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional query parameters passed to the API.</p></dd>


<dt id="arg-object-ids">object_ids<a class="anchor" aria-label="anchor" href="#arg-object-ids"></a></dt>
<dd><p>a numeric vector of object IDs to be deleted.</p></dd>


<dt id="arg-where">where<a class="anchor" aria-label="anchor" href="#arg-where"></a></dt>
<dd><p>a simple SQL where statement indicating which features should be
deleted. When the where statement evaluates to <code>TRUE</code>, those values will be
deleted.</p></dd>


<dt id="arg-filter-geom">filter_geom<a class="anchor" aria-label="anchor" href="#arg-filter-geom"></a></dt>
<dd><p>an object of class <code>bbox</code>, <code>sfc</code> or <code>sfg</code> used to filter
query results based on a predicate function.</p></dd>


<dt id="arg-predicate">predicate<a class="anchor" aria-label="anchor" href="#arg-predicate"></a></dt>
<dd><p>Spatial predicate to use with <code>filter_geom</code>. Default
<code>"intersects"</code>. Possible options are <code>"intersects"</code>, <code>"contains"</code>,
<code>"crosses"</code>,  <code>"overlaps"</code>,  <code>"touches"</code>, and <code>"within"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>

<ul><li><p><code>add_features()</code> returns a <code>data.frame</code> with columns <code>objectId</code>, <code>uniqueId</code>, <code>globalId</code>, <code>success</code></p></li>
<li><p><code>update_features()</code> returns a list with an element named <code>updateResults</code> which is a <code>data.frame</code> with columns <code>objectId</code>, <code>uniqueId</code>, <code>globalId</code>, <code>success</code></p></li>
<li><p><code>delete_features()</code> returns a list with an element named <code>deleteResults</code> which is a <code>data.frame</code> with columns <code>objectId</code>, <code>uniqueId</code>, <code>globalId</code>, <code>success</code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>For a more detailed guide to adding, updating, and deleting features, view the
tutorial on the <a href="https://r.esri.com/r-bridge-site/location-services/workflows/add-delete-update.html" class="external-link">R-ArcGIS Bridge website</a>.</p>
<p>Regarding the <code>match_on</code> argument:when publishing an object to an ArcGIS Portal
from R, the object's names are provided as the alias. The object's names are
subject to change according to the standards of the ArcGIS REST API. For example.
<code>"Sepal.Length"</code> is changed to <code>"Sepal_Width"</code> in the <code>name</code> field but the alias
remains <code>"Sepal.Length"</code>. For that reason, we match on the alias name by default.
Change this argument to match based on the field name.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>  <span class="co"># this is pseudo-code and will not work</span></span></span>
<span class="r-in"><span>  <span class="va">flayer</span> <span class="op">&lt;-</span> <span class="fu"><a href="arc_open.html">arc_open</a></span><span class="op">(</span><span class="va">furl</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># add sf objects to existing feature service</span></span></span>
<span class="r-in"><span>  <span class="fu">add_features</span><span class="op">(</span><span class="va">flayer</span>, <span class="va">sfobj</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># delete all features</span></span></span>
<span class="r-in"><span>  <span class="fu">delete_features</span><span class="op">(</span><span class="va">flayer</span>, where <span class="op">=</span> <span class="st">"1 = 1"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># update features</span></span></span>
<span class="r-in"><span>  <span class="fu">update_features</span><span class="op">(</span><span class="va">flayer</span>, <span class="va">dfobj</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Josiah Parry.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

